<% @layout_fit_my_4x4 = 'below' %>

<% cache(@product) do %>
<div id="page-product">
  <div class="container clearfix">
    <div class="col-sm-7 photos">
      <% if @product.images.size >= 1 %>
      <ul id="glasscase" class="gc-start">
      <% @product.images.each do |image| %>
      <li><%= image_tag(image.thumbnail(geometry: "635x360").url, alt:@product.name) %></li>
      <% end %>
      </ul>
      <div class="image-disclaimer">Generic image only. Actual product may vary depending on model.</div>
      <% end %>
    </div>
    <div class="col-sm-5 product-overview">
      <div class="price"><%= number_to_currency @product.price if @product.price.present? %></div>
      <div class="product-no"><%= @product.product_no %></div>
      <%= button_tag t('.buttons.add_to_wishlist'), class: 'btn btn-primary add-to-wishlist' %>
      <div class="short-description"><%= raw @product.short_description %></div>
    </div>
  </div>

  <div class="menu">
    <div class="container clearfix">
      <ul class="links clearfix">
        <li><a href="#description">Description</a></li>
        <li><a href="#specifications">Specifications</a></li>
        <% if @product.fitting_instructions_resource.present? %>
        <li><a href="#fitting">Fitting</a></li>
        <% end %>
        <% if @product.warranty.present? %>
        <li><a href="#warranty">Warranty</a></li>
        <% end %>
      </ul>
      <button class="btn btn-link view-all">View All</button>
      <button class="btn btn-link close-all">Close All</button>
    </div>
  </div>

  <div class="container">
    <h3 id="description">Description</h3>
    <%= raw @product.description %>
    <hr />
    <h3 id="specifications">Specifications</h3>
    <div class="specifications">
    <% if @product.quantity_required.present? and @product.quantity_required > 0 %>
    <div class="row">
      <div class="col-sm-3 col-lg-2 title">Quantity Required</div>
      <div class="col-sm-9 col-lg-10 value"><%= @product.quantity_required %></div>
    </div>
    <% end %>

    <% if @product.specifications.present? %>
    <% @product.specifications.each do |spec| %>
    <div class="row">
      <div class="col-sm-3 col-lg-2 title"><%= spec.title %></div>
      <div class="col-sm-9 col-lg-10 value"><%= spec.value %></div>
    </div>
    <% end %>
    <% end %>
    <% if @product.notes.present? %>
    <div class="row">
      <div class="col-sm-3 col-lg-2 title">Notes</div>
      <div class="col-sm-9 col-lg-10 value"><%= raw @product.notes %></div>
    </div>
    <% end %>
    </div>
    <hr />

    <% if @product.fitting_instructions_resource.present? %>
    <div class="fitting">
    <h3 id="fitting">Fitting</h3>
    <%= image_tag('icon_pdf.png') if @product.fitting_instructions_resource.mime_type == 'application/pdf' %>
    <%= link_to @product.fitting_instructions_resource.file_name, @product.fitting_instructions_resource.url %>
    <span class="file-size"><%= number_to_human_size @product.fitting_instructions_resource.file_size %></span>
    </div>
    <hr />
    <% end %>

    <% if @product.warranty.present? %>
    <h3 id="warranty">Warranty</h3>
    <%= raw @product.warranty %>
    <hr />
    <% end %>

    <h3>Related Products</h3>
  </div>
</div>
<% end %>
